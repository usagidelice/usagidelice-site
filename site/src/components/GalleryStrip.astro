---
import Reveal from "./Reveal.astro";

const images = Astro.props.images ?? [
  "/gallery/1.webp",
  "/gallery/2.webp",
  "/gallery/3.webp",
  "/gallery/4.webp",
  "/gallery/5.webp",
  "/gallery/6.webp",
  "/gallery/7.webp",
  "/gallery/8.webp",
];
---

<section class="wrap">
  <div class="inner">
    <Reveal>
      <div class="head">
        <h2 class="t">Galerie</h2>
        <p class="p">
          Des marchés parisiens aux festivals — le stand, la cuisson, et les
          takoyaki tout juste sortis des plaques.
        </p>
      </div>
    </Reveal>

    <Reveal delay={120}>
      <div class="strip card">
        <div class="track" aria-label="Galerie Usagi Délice">
          {
            [...images, ...images].map((src) => (
              <a class="frame" href={src} target="_blank" rel="noreferrer">
                <img src={src} alt="Photo Usagi Délice" loading="lazy" />
              </a>
            ))
          }
        </div>
      </div>
    </Reveal>
  </div>

  <style>
    .wrap {
      padding: 3.2rem 1.1rem;
    }
    .inner {
      max-width: 1140px;
      margin: 0 auto;
    }
    .t {
      margin: 0;
      font-size: 1.75rem;
    }
    .p {
      margin: 0.5rem 0 1.2rem;
      color: rgba(29, 29, 31, 0.74);
      max-width: 72ch;
    }

    .strip {
      overflow: hidden;
      padding: 0.9rem;
    }
    .track {
      display: flex;
      gap: 0.9rem;
      animation: slide 26s linear infinite;
      will-change: transform;
    }
    .frame {
      flex: 0 0 auto;
      width: clamp(190px, 22vw, 320px);
      height: clamp(140px, 16vw, 220px);
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(194, 59, 50, 0.22);
      box-shadow: 0 12px 28px rgba(29, 29, 31, 0.1);
      transform: translateZ(0);
    }
    .frame img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 0.25s ease;
    }
    .frame:hover img {
      transform: scale(1.06);
    }

    @keyframes slide {
      from {
        transform: translateX(0);
      }
      to {
        transform: translateX(-50%);
      }
    }
    @media (prefers-reduced-motion: reduce) {
      .track {
        animation: none;
      }
    }
  </style>
</section>
