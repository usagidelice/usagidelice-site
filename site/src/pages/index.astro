---
import BaseLayout from "../layouts/BaseLayout.astro";
import Reveal from "../components/Reveal.astro";
import GalleryStrip from "../components/GalleryStrip.astro";

const title = "Usagi Délice — Takoyaki d’Osaka à Paris";
const description =
  "Découvrez Usagi Délice : takoyaki faits maison, préparés sur place, avec une identité kawaii et chaleureuse. Suivez nos événements et collaborations sur Instagram.";

const eventsIntro =
  "Nous participons régulièrement à des événements culturels japonais à Paris et en Île-de-France. Au fil des années, nous avons eu le plaisir de rencontrer un large public autour de nos takoyaki faits maison, préparés sur place.";

const eventsList = [
  "Japan Fes (Paris)",
  "Rice Market — organisé par Europe Times (2024 & 2025)",
  "Noël à La Villette",
  "Hanami de Sceaux",
  "Fête de la Mi-Automne à Belleville (2025)",
  "UNIQLO Bastille — événement d’ouverture",
  "Tang Frères — collaboration en cours",
];

// 主视觉背景图
const heroImg = "/hero.webp";

// 视觉断点图（随便换成你喜欢的那张）
const breakImg = "/gallery/3.webp";
---

<BaseLayout title={title} description={description}>
  <!-- 顶部动感带 -->
  <div class="marquee" aria-hidden="true">
    <div class="marquee__track">
      <span class="marquee__item">Takoyaki • Osaka • Paris</span>
      <span class="marquee__item">Takoyaki • Osaka • Paris</span>
      <span class="marquee__item">Takoyaki • Osaka • Paris</span>
      <span class="marquee__item">Takoyaki • Osaka • Paris</span>
      <span class="marquee__item">Takoyaki • Osaka • Paris</span>
      <span class="marquee__item">Takoyaki • Osaka • Paris</span>
      <span class="marquee__item">Takoyaki • Osaka • Paris</span>
      <span class="marquee__item">Takoyaki • Osaka • Paris</span>
    </div>
  </div>

  <!-- JAPANFES 级 HERO：全屏背景图 + 文案叠加 -->
  <section class="hero-full">
    <img
      class="hero-bg"
      src={heroImg}
      alt="Takoyaki Usagi Délice"
      loading="eager"
      decoding="async"
    />

    <div class="hero-overlay">
      <Reveal>
        <span class="hero-kicker">Street food japonaise • Osaka • Paris</span>
      </Reveal>

      <Reveal delay={80}>
        <h1 class="hero-title">
          Takoyaki d’Osaka,<br />
          faits à la minute à Paris
        </h1>
      </Reveal>

      <Reveal delay={140}>
        <p class="hero-sub">
          Pâte légère, cuisson minute, toppings maison.<br />
          Une bouchée authentique, servie chaude, dans un univers kawaii rouge & crème.
        </p>
      </Reveal>

      <Reveal delay={200}>
        <div class="hero-actions">
          <a class="btn btn-primary" href="/evenements">Où nous trouver</a>
          <a class="btn btn-ghost" href="/menu">Menu & prix</a>
          <a
            class="btn btn-ghost"
            href="https://www.instagram.com/usagidelice/"
            target="_blank"
            rel="noreferrer"
          >
            Instagram
          </a>
        </div>
      </Reveal>

      <Reveal delay={260}>
        <div class="hero-pills">
          <span class="pill">Fait main</span>
          <span class="pill">Cuisson minute</span>
          <span class="pill">Osaka vibe</span>
        </div>
      </Reveal>
    </div>

    <!-- 小贴纸层（更“活”） -->
    <div class="hero-stickers" aria-hidden="true">
      <div class="sticker s1">Servi chaud</div>
      <div class="sticker s2">Toppings maison</div>
      <div class="sticker s3">100% Takoyaki</div>
    </div>
  </section>

  <!-- Événements -->
  <section class="section">
    <div class="page-wrap">
      <Reveal>
        <div class="card page">
          <h2 class="section-title">Événements & collaborations</h2>
          <p class="lead">{eventsIntro}</p>

          <div style="height: 12px"></div>

          <ul class="clean-list">
            {eventsList.map((item) => <li>{item}</li>)}
          </ul>

          <div style="height: 14px"></div>

          <div class="actions-row">
            <a class="btn btn-secondary" href="/evenements"
              >Voir le calendrier</a
            >
            <a
              class="btn"
              href="https://www.instagram.com/usagidelice/"
              target="_blank"
              rel="noreferrer"
            >
              Suivre sur Instagram
            </a>
          </div>
        </div>
      </Reveal>
    </div>
  </section>

  <!-- 视觉断点：整屏图片（强冲击） -->
  <section class="visual-break">
    <img
      src={breakImg}
      alt="Takoyaki cuisson minute"
      loading="lazy"
      decoding="async"
    />
    <div class="visual-break__overlay"></div>

    <Reveal>
      <span class="visual-word">Fait à la minute</span>
    </Reveal>
  </section>

  <!-- Galerie：横向胶片条（你需要把 GalleryStrip 调成整屏高度，下面会提示） -->
  <GalleryStrip />

  <!-- 2 cards -->
  <section class="section">
    <div class="page-wrap">
      <div class="grid grid-2">
        <Reveal>
          <div class="card page">
            <h2>Notre histoire</h2>
            <p>
              Usagi Délice est né d’une passion pour les takoyaki : le geste, la
              cuisson minute, et la convivialité d’une street food servie
              chaude, tout juste sortie des plaques.
            </p>
            <a class="btn btn-secondary" href="/notre-histoire">Découvrir</a>
          </div>
        </Reveal>

        <Reveal delay={120}>
          <div class="card page">
            <h2>Culture & Osaka</h2>
            <p>
              Les takoyaki sont un symbole populaire d’Osaka : simples,
              généreux, et faits pour être partagés. On vous raconte l’esprit
              derrière cette bouchée iconique.
            </p>
            <a class="btn btn-secondary" href="/culture">Explorer</a>
          </div>
        </Reveal>
      </div>
    </div>
  </section>

  <style>
    /* marquee 动感带 */
    .marquee {
      overflow: hidden;
      border-top: 1px solid rgba(194, 59, 50, 0.22);
      border-bottom: 1px solid rgba(194, 59, 50, 0.22);
      background: rgba(246, 235, 221, 0.55);
    }
    .marquee__track {
      display: flex;
      gap: 2.2rem;
      white-space: nowrap;
      animation: m 18s linear infinite;
      padding: 0.55rem 0;
      will-change: transform;
    }
    .marquee__item {
      font-weight: 900;
      color: rgba(194, 59, 50, 0.92);
      letter-spacing: 0.03em;
      text-transform: uppercase;
    }
    @keyframes m {
      from {
        transform: translateX(0);
      }
      to {
        transform: translateX(-50%);
      }
    }

    /* ===== HERO 全屏背景 ===== */
    .hero-full {
      position: relative;
      min-height: 92vh;
      width: 100%;
      overflow: hidden;
      background: #000;
    }

    .hero-bg {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.03);
    }

    /* 暗角+渐变罩层：保证文字可读，同时保留食物质感 */
    .hero-full::after {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(
          900px 500px at 20% 20%,
          rgba(0, 0, 0, 0.15),
          transparent 60%
        ),
        linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.45),
          rgba(0, 0, 0, 0.15) 40%,
          rgba(0, 0, 0, 0.7)
        );
      z-index: 1;
    }

    .hero-overlay {
      position: relative;
      z-index: 2;
      max-width: 1140px;
      margin: 0 auto;
      padding: clamp(3.5rem, 7vh, 6.2rem) 1.1rem 2.8rem;
      color: #fff;
    }

    .hero-kicker {
      display: inline-block;
      margin-bottom: 1rem;
      font-weight: 900;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      opacity: 0.9;
    }

    .hero-title {
      font-size: clamp(2.4rem, 5vw, 4.4rem);
      line-height: 1.02;
      margin: 0 0 1rem;
      text-shadow: 0 18px 50px rgba(0, 0, 0, 0.3);
    }

    .hero-sub {
      font-size: clamp(1.05rem, 1.4vw, 1.25rem);
      max-width: 60ch;
      opacity: 0.95;
      margin: 0 0 1.6rem;
      text-shadow: 0 16px 36px rgba(0, 0, 0, 0.25);
    }

    .hero-actions {
      display: flex;
      gap: 0.8rem;
      flex-wrap: wrap;
      margin-bottom: 1.2rem;
    }

    /* pills */
    .hero-pills {
      display: flex;
      gap: 0.55rem;
      flex-wrap: wrap;
      margin-top: 0.4rem;
    }
    .pill {
      display: inline-flex;
      padding: 0.45rem 0.75rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      background: rgba(246, 235, 221, 0.14);
      backdrop-filter: blur(10px);
      font-weight: 800;
      letter-spacing: 0.02em;
    }

    /* stickers（角落漂浮贴纸） */
    .hero-stickers {
      position: absolute;
      inset: 0;
      z-index: 2;
      pointer-events: none;
    }
    .sticker {
      position: absolute;
      padding: 0.55rem 0.75rem;
      border-radius: 16px;
      background: rgba(246, 235, 221, 0.82);
      border: 1px solid rgba(194, 59, 50, 0.28);
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.18);
      font-weight: 900;
      color: rgba(194, 59, 50, 0.96);
      backdrop-filter: blur(10px);
      transform: rotate(-2deg);
    }
    .s1 {
      left: 16px;
      top: 18px;
    }
    .s2 {
      right: 18px;
      top: 22px;
      transform: rotate(2deg);
    }
    .s3 {
      right: 18px;
      bottom: 18px;
      transform: rotate(-3deg);
    }

    /* ===== 视觉断点 ===== */
    .visual-break {
      position: relative;
      height: 80vh;
      overflow: hidden;
      margin: 0;
    }
    .visual-break img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transform: scale(1.02);
    }
    .visual-break__overlay {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.38);
      z-index: 1;
    }
    .visual-word {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(2rem, 6vw, 5.2rem);
      font-weight: 950;
      color: #fff;
      z-index: 2;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      text-shadow: 0 24px 70px rgba(0, 0, 0, 0.35);
    }

    /* 页面容器 */
    .page-wrap {
      max-width: 1140px;
      margin: 0 auto;
      padding: 0 1.1rem;
    }

    .actions-row {
      display: flex;
      gap: 0.7rem;
      flex-wrap: wrap;
      margin-top: 0.6rem;
    }

    /* reveal 动画（你已在组件里加了观察器，这里是样式） */
    .reveal {
      opacity: 0;
      transform: translateY(14px);
      transition:
        opacity 0.55s ease,
        transform 0.55s cubic-bezier(0.2, 0.8, 0.2, 1);
      transition-delay: var(--d, 0ms);
    }
    .reveal.is-in {
      opacity: 1;
      transform: translateY(0);
    }

    @media (max-width: 900px) {
      .marquee__track {
        animation-duration: 14s;
      }
      .hero-overlay {
        padding-top: 3.6rem;
      }
      .visual-break {
        height: 70vh;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .marquee__track {
        animation: none;
      }
    }
  </style>
</BaseLayout>
